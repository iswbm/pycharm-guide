# 5.7 【提高效率 07】代码封装，一步到位

![](http://image.iswbm.com/20200804124133.png)

当一个主函数的代码行数越来越多时，代码的可读性会变得越来越差。通常的做法，是按照功能将代码进行封装成多个函数。

这个过程无非是

1. 在合适的位置定义一个新的函数
2. 将原有的代码拷贝至该函数中
3. 并将原的代码替换成该函数的调用

倘若你的重构的工作量不是很大，完全可以手工来完成这些事。

但当你是在重构一个项目代码时，你可能需要一个更高效的封装技巧。

在 PyCharm 中，提供了多种形式的代码重构快捷方法，大家比较常见的可能是重构变量名：shift+F6，而今天要给大家介绍的是方法的重构，也即代码快速封装的技巧。

假如，我现在有如下一段代码，红框标出的代码放在主函数中，有些不太合适，况且这段代码不能让人一眼就看出它是在做什么事情。如何将其进行封装，对我们理清整个主程序的逻辑会有帮助。

![](http://image.iswbm.com/20191222141905.png)



选中你要封装的代码，然后按住 ⌘ + ⌥ + M后，会跳出如下界面，根据自己的需要，修改函数名，选择参数和返回值

![](http://image.iswbm.com/20191222141955.png)

一切就绪点击 `OK`，PyCharm 会自动在合适的位置为你定义一个函数名，并将你选中的代码放到里面，其中参数名和返回值也都是按照你的要求，效果如下：

![](http://image.iswbm.com/20191222142223.png)



